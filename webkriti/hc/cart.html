<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="cart.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Alex+Brush&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Tangerine&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Parisienne&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Satisfy&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css2?family=Allura&display=swap" rel="stylesheet">


</head>
<body>
    
    <header>
        <div class="navbar">
            <a href="/home">Home</a>
            <a href="/cartt">Cart</a>            
            <a href="#Favorites">Categories</a>
            <a href="#footer">Contact Us</a>
        </div>
       
    </header>

   
    <main>
        <div class="hhh">
        <h1 class="hh">Shopping Cart</h1>
        </div>

    <ul id="cart-list">
        
    </ul>
<hr style="margin-left:3rem">
    <p class="total">Total Price: <span id="total-price">0</span></p>

    <div class="center-button-container">
    <button class="order"id="place-order">Place Order<div class="star-1">
        <svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 784.11 815.53" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><defs></defs><g id="Layer_x0020_1"><metadata id="CorelCorpID_0Corel-Layer"></metadata><path d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z" class="fil0"></path></g></svg>
      </div>
      <div class="star-2">
        <svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 784.11 815.53" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><defs></defs><g id="Layer_x0020_1"><metadata id="CorelCorpID_0Corel-Layer"></metadata><path d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z" class="fil0"></path></g></svg>
      </div>
      <div class="star-3">
        <svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 784.11 815.53" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><defs></defs><g id="Layer_x0020_1"><metadata id="CorelCorpID_0Corel-Layer"></metadata><path d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z" class="fil0"></path></g></svg>
      </div>
      <div class="star-4">
        <svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 784.11 815.53" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><defs></defs><g id="Layer_x0020_1"><metadata id="CorelCorpID_0Corel-Layer"></metadata><path d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z" class="fil0"></path></g></svg>
      </div>
      <div class="star-5">
        <svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 784.11 815.53" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><defs></defs><g id="Layer_x0020_1"><metadata id="CorelCorpID_0Corel-Layer"></metadata><path d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z" class="fil0"></path></g></svg>
      </div>
      <div class="star-6">
        <svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 784.11 815.53" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><defs></defs><g id="Layer_x0020_1"><metadata id="CorelCorpID_0Corel-Layer"></metadata><path d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z" class="fil0"></path></g></svg>
      </div></button>
      </div>
    </main>
   
    <footer id="footer" class="footer">
        <div class="footer-section">
       <div class="branch">
        <h3 >Branches</h3>
        <p>India</p>
        <p> Singapore</p>
        <p>Sweden</p>
        <p>Ireland</p>
       </div>
       <div class="trade">
        <h3 >Trade Partners</h3>
        <p>Vinay Cheripally</p>
        <p>Zoey</p>
       </div>
       <div id="contact">
       <h3 >Contact us</h3>
       <p>winkelco@gmail.com</p>
       </div>
       </div>
       <p>&copy; 2023 Winkel. All rights reserved.</p>
    </footer>
    


   
    <script>
         const cartList = document.getElementById('cart-list');
  const totalPrice = document.getElementById('total-price');
  const placeOrderButton = document.getElementById('place-order');

     document.addEventListener('DOMContentLoaded', () => {
    fetchCartItems();

    placeOrderButton.addEventListener('click', () => {
      alert('Order placed successfully!');
    });
  });



  
    async function fetchCartItems() {
        try {
            const response = await fetch('/cart'); 
            const cartItems = await response.json();
            
            cartList.innerHTML = ''; 

            let total = 0;

            cartItems.forEach((item, index )=> {
                
                const priceWithoutDollar = parseFloat(item.price.replace('$', ''));
                const cartItemDiv = document.createElement('div');
                        
                        cartItemDiv.innerHTML = `
                        <div class="cart-item">
                        <div class="first">
                <img src="${item.url}" alt="${item.name}" style="height:200px; width:200px " class="cart-item-image">
               <b> <p class="item-name">${item.name}</p></b>
            </div>
            <div class="cart-item-details" >
        
            <p class="quantity"><b>Quantity:</b> ${item.quantity}</p>
        </div>
        <div class="cart-item-price">
            <p class="price"><b>Price:</b> $${priceWithoutDollar * item.quantity}</p>

        </div>
        <button onclick="rembutton(this)"class="remove-button" data-name="${item.name}"><span class="button-content">Remove </span></button>
        </div>
        
                        `;
                        
                        if (index < cartItems.length - 1) {
                const hrElement = document.createElement('hr');
                cartItemDiv.appendChild(hrElement);
            }

            cartList.appendChild(cartItemDiv);

                        total += priceWithoutDollar * item.quantity;
                    });

                    totalPrice.textContent = `$${total.toFixed(2)}`;

                } catch (error) {
                    console.error('Error fetching cart items:', error);
                }
            }
            fetchCartItems();

            placeOrderButton.addEventListener('click', () => {
                alert('Order placed successfully!');
            });
        


    

       
window.rembutton=async function(button){
    const productName = button.getAttribute('data-name');
    
    try {
      const response = await fetch('/remove-from-cart', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ name: productName }),
      });

      if (response.ok) {
        
        button.closest('.cart-item').remove();
        
        
        fetchCartItems();
      } else {
        console.error('Error removing product from cart:', response.status);
      }
    } catch (error) {
      console.error('Error removing product from cart:', error);
    }
  }

    </script>
</body>
</html>